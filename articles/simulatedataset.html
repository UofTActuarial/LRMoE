<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation in LRMoE • LRMoE</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Simulation in LRMoE">
<meta property="og:description" content="How to simulate from an LRMoE model.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LRMoE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="simulatedataset_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Simulation in LRMoE</h1>
            
      
      
      <div class="hidden name"><code>simulatedataset.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This document contains the data generation process for the dataset <code>LRMoEDemoData</code> included in the <code>LRMoE</code> package. This also serves as an example of using the <code>sim_dataset</code> function included in the package.</p>
</div>
<div id="data-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-simulation" class="anchor"></a>Data Simulation</h2>
<div id="complete-dataset" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-dataset" class="anchor"></a>Complete Dataset</h3>
<p>Supose there is an auto-insurance company with two lines of business, with a total of 10,000 policies. The policyholder information includes sex (1 for Male and 0 for Female), driver’s age (with range 20~80), car age (with range 0~10), and region (1 for urban and 0 for rural). We assume all covariates are uniformly and independently drawn at random.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">7777</span><span class="op">)</span> 
<span class="va">sample.size</span> <span class="op">=</span> <span class="fl">10000</span>
<span class="va">intercept</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">sample.size</span><span class="op">)</span>
<span class="va">sex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="va">sample.size</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>
<span class="va">aged</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">sample.size</span>, <span class="fl">20</span>, <span class="fl">80</span><span class="op">)</span>
<span class="va">agec</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">sample.size</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>
<span class="va">region</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="va">sample.size</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>
<span class="va">X</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">intercept</span>, <span class="va">sex</span>, <span class="va">aged</span>, <span class="va">agec</span>, <span class="va">region</span><span class="op">)</span>,
           nrow <span class="op">=</span> <span class="va">sample.size</span>, byrow <span class="op">=</span> <span class="cn">FALSE</span>,
           dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="cn">NULL</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"intercept"</span>, <span class="st">"sex"</span>, <span class="st">"agedriver"</span>, <span class="st">"agecar"</span>, <span class="st">"region"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For simplicity, we assume there are two latent risk classes: low (L) and high (H). The characteristics for the high-risk class are male, young age, old car age and urban region. This is specified by the following matrix of logit regression coefficients, where the second row represents the reference class.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n.comp</span> <span class="op">=</span> <span class="fl">2</span>
<span class="va">alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.10</span>, <span class="fl">1.25</span>,
                  <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
                nrow <span class="op">=</span> <span class="va">n.comp</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We consider a two-dimensional response: claim frequency from the first business line, and claim severity from the second business line. For demonstration purposes and for simplicity, we don’t consider the same business line to avoid the complication where zero frequency necessarily implies zero severity. The component distributions and their parameters are specified as follows.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dim.m</span> <span class="op">=</span> <span class="fl">2</span>
<span class="va">comp_dist</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"poisson"</span>, <span class="st">"zigammacount"</span>,
                     <span class="st">"lognormal"</span>, <span class="st">"inversegaussian"</span><span class="op">)</span>,
                   nrow <span class="op">=</span> <span class="va">dim.m</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">params_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>p_zero <span class="op">=</span> <span class="fl">0.2</span>, m <span class="op">=</span> <span class="fl">30</span>, s <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,
                    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>meanlog <span class="op">=</span> <span class="fl">4</span>, sdlog <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">20</span>, shape <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span>,
                    nrow <span class="op">=</span> <span class="va">dim.m</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>The <code>LRMoE</code> package includes a simulator. Given the covariates and parameters defined above, we can directly simulate a dataset.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Y.complete</span> <span class="op">=</span> <span class="fu">LRMoE</span><span class="fu">::</span><span class="fu"><a href="../reference/sim_dataset.html">sim_dataset</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha</span>, x <span class="op">=</span> <span class="va">X</span>, 
                                comp_dist <span class="op">=</span> <span class="va">comp_dist</span>, params_list <span class="op">=</span> <span class="va">params_list</span><span class="op">)</span></code></pre></div>
<p>The simulated values are plotted as follows. For each dimension of <code>Y</code>, the histogram is relatively well separated as two components. This is more or less done on purpose to demonstrate that the fitting procedure can identify the <em>true</em> model when it is known. In practice, we are usually less concerned of the underlying data generating distribution, as long as the LRMoE model provides a reasonable fit of data.</p>
<p><img src="simulatedataset_files/figure-html/unnamed-chunk-6-1.png" width="700" style="display: block; margin: auto;"><img src="simulatedataset_files/figure-html/unnamed-chunk-6-2.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="truncation-and-censoring" class="section level3">
<h3 class="hasAnchor">
<a href="#truncation-and-censoring" class="anchor"></a>Truncation and Censoring</h3>
<p>One distinct feature of <code>LRMoE</code> is dealing with data truncation and censoring, which is common in insurance contexts. Consequently, instead of one single number for each dimension <code>d</code>, a tuple <code>(tl.d, yl.d, yu.d, tu.d)</code> is required, where <code>tl.d</code>/<code>tu.d</code> are the lower/upper bounds of truncation, and <code>yl.d</code>/<code>yu.d</code> are the lower/upper bounds of censoring.</p>
<p>For illustration purposes, we assume the dataset is subject to the following truncation and censoring.</p>
<table class="table">
<thead><tr class="header">
<th>Index</th>
<th><code>Y.complete[,1]</code></th>
<th><code>Y.complete[,2]</code></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1-6000</td>
<td>No truncation or censoring</td>
<td>No truncation or censoring</td>
</tr>
<tr class="even">
<td>6001-8000</td>
<td>No truncation or censoring</td>
<td>Left Truncated at 5</td>
</tr>
<tr class="odd">
<td>8001-10000</td>
<td>No truncation or censoring</td>
<td>Right Censored at 100</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First block: 1~6000</span>
<span class="va">X.obs</span> <span class="op">=</span> <span class="va">X</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6000</span>,<span class="op">]</span>
<span class="va">tl.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6000</span><span class="op">)</span>
<span class="va">yl.1</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6000</span>, <span class="fl">1</span><span class="op">]</span>
<span class="va">yu.1</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6000</span>, <span class="fl">1</span><span class="op">]</span>
<span class="va">tu.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="fl">6000</span><span class="op">)</span> 
<span class="va">tl.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6000</span><span class="op">)</span>
<span class="va">yl.2</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6000</span>, <span class="fl">2</span><span class="op">]</span>
<span class="va">yu.2</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6000</span>, <span class="fl">2</span><span class="op">]</span>
<span class="va">tu.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="fl">6000</span><span class="op">)</span> 
<span class="co"># Second block: 6001~8000</span>
<span class="va">keep.idx</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="fl">5</span>
<span class="va">keep.length</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">keep.idx</span><span class="op">)</span>
<span class="va">X.obs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">X.obs</span>, <span class="va">X</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>,<span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span>,<span class="op">]</span><span class="op">)</span>
<span class="va">tl.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tl.1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">keep.length</span><span class="op">)</span><span class="op">)</span>
<span class="va">yl.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yl.1</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>, <span class="fl">1</span><span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span><span class="op">]</span><span class="op">)</span>
<span class="va">yu.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yu.1</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>, <span class="fl">1</span><span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span><span class="op">]</span><span class="op">)</span>
<span class="va">tu.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tu.1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="va">keep.length</span><span class="op">)</span><span class="op">)</span>
<span class="va">y.temp</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>, <span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span><span class="op">]</span>
<span class="va">tl.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tl.2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="va">keep.length</span><span class="op">)</span><span class="op">)</span>
<span class="va">yl.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yl.2</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>, <span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span><span class="op">]</span><span class="op">)</span>
<span class="va">yu.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yu.2</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">6001</span><span class="op">:</span><span class="fl">8000</span>, <span class="fl">2</span><span class="op">]</span><span class="op">[</span><span class="va">keep.idx</span><span class="op">]</span><span class="op">)</span>
<span class="va">tu.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tu.2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="va">keep.length</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Third block: 8001~10000</span>
<span class="va">X.obs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">X.obs</span>, <span class="va">X</span><span class="op">[</span><span class="fl">8001</span><span class="op">:</span><span class="fl">10000</span>,<span class="op">]</span><span class="op">)</span>
<span class="va">tl.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tl.1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>
<span class="va">yl.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yl.1</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">8001</span><span class="op">:</span><span class="fl">10000</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="va">yu.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yu.1</span>, <span class="va">Y.complete</span><span class="op">[</span><span class="fl">8001</span><span class="op">:</span><span class="fl">10000</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="va">tu.1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tu.1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>
<span class="va">y.temp</span> <span class="op">=</span> <span class="va">Y.complete</span><span class="op">[</span><span class="fl">8001</span><span class="op">:</span><span class="fl">10000</span>, <span class="fl">2</span><span class="op">]</span>
<span class="va">censor.idx</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">y.temp</span><span class="op">&gt;=</span><span class="fl">100</span><span class="op">)</span>
<span class="va">yl.temp</span> <span class="op">=</span> <span class="va">y.temp</span>
<span class="va">yl.temp</span><span class="op">[</span><span class="va">censor.idx</span><span class="op">]</span> <span class="op">=</span> <span class="fl">100</span>
<span class="va">yu.temp</span> <span class="op">=</span> <span class="va">y.temp</span>
<span class="va">yu.temp</span><span class="op">[</span><span class="va">censor.idx</span><span class="op">]</span> <span class="op">=</span> <span class="cn">Inf</span>
<span class="va">tl.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tl.2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>
<span class="va">yl.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yl.2</span>, <span class="va">yl.temp</span><span class="op">)</span>
<span class="va">yu.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">yu.2</span>, <span class="va">yu.temp</span><span class="op">)</span>
<span class="va">tu.2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tu.2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Put things together</span>
<span class="va">Y.obs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">tl.1</span>, <span class="va">yl.1</span>, <span class="va">yu.1</span>, <span class="va">tu.1</span>, <span class="va">tl.2</span>, <span class="va">yl.2</span>, <span class="va">yu.2</span>, <span class="va">tu.2</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">8</span>, byrow <span class="op">=</span> <span class="cn">FALSE</span>,
          dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="cn">NULL</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tl.1"</span>, <span class="st">"yl.1"</span>, <span class="st">"yu.1"</span>, <span class="st">"tu.1"</span>, 
                    <span class="st">"tl.2"</span>, <span class="st">"yl.2"</span>, <span class="st">"yu.2"</span>, <span class="st">"tu.2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>As a result of truncating <code>Y.complete[,2]</code>, 172 rows are discarded, leaving 9842 observations available for model fitting. Sample data points are show below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># No truncation, no censoring</span>
<span class="va">Y.obs</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></code></pre></div>
<pre><code>##     tl.1     yl.1     yu.1     tu.1     tl.2     yl.2     yu.2     tu.2 
##  0.00000 28.00000 28.00000      Inf  0.00000 14.83233 14.83233      Inf</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Y.2 is left-truncated</span>
<span class="va">Y.obs</span><span class="op">[</span><span class="fl">6003</span>,<span class="op">]</span></code></pre></div>
<pre><code>##     tl.1     yl.1     yu.1     tu.1     tl.2     yl.2     yu.2     tu.2 
##  0.00000  2.00000  2.00000      Inf  5.00000 67.87901 67.87901      Inf</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Y.2 is right-censored</span>
<span class="va">Y.obs</span><span class="op">[</span><span class="fl">7900</span>,<span class="op">]</span></code></pre></div>
<pre><code>## tl.1 yl.1 yu.1 tu.1 tl.2 yl.2 yu.2 tu.2 
##    0    0    0  Inf    0  100  Inf  Inf</code></pre>
<p>We will export both the complete and incomplete datasets to the <code>LRMoE</code> package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span>, <span class="va">Y.complete</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">Y.complete</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>,<span class="fl">10000</span><span class="op">)</span>, 
             <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10000</span><span class="op">)</span>, <span class="va">Y.complete</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, <span class="va">Y.complete</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">Inf</span>,<span class="fl">10000</span><span class="op">)</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">8</span>, byrow <span class="op">=</span> <span class="cn">FALSE</span>,
          dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="cn">NULL</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tl.1"</span>, <span class="st">"yl.1"</span>, <span class="st">"yu.1"</span>, <span class="st">"tu.1"</span>, 
                    <span class="st">"tl.2"</span>, <span class="st">"yl.2"</span>, <span class="st">"yu.2"</span>, <span class="st">"tu.2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Y</span>, <span class="va">X.obs</span>, <span class="va">Y.obs</span>, file <span class="op">=</span> <span class="st">"LRMoEDemoData.rda"</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://sparktseung.com/">Spark Tseung</a>, <a href="https://scholar.google.com/citations?user=atdCdk8AAAAJ&amp;hl=en&amp;oi=ao">Tsz Chai Fung</a>, <a href="https://www.statistics.utoronto.ca/people/directories/all-faculty/andrei-badescu">Andrei L. Badescu</a>, <a href="https://www.statistics.utoronto.ca/people/directories/all-faculty/sheldon-lin">Sheldon X. Lin</a>, <a href="https://www.wei-siyi.com/">Siyi Wei</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
